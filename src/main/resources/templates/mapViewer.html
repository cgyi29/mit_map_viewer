<html xmlns:th="http://www.w3.org/1999/html" lang="en">
    <th:body>
        <canvas id="mapCanvas" width="800" height="600" style="border:1px solid"></canvas>
        <div id="dataDisplay" ></div>
    </th:body>
    <script th:src="@{/js/canvasEvent.js}"></script>
    <script th:src="@{/js/featureInit.js}"></script>
    <script th:src="@{/js/pickingBuffer.js}"></script>
    <script th:inline="javascript">
        window.onload = async function() {
            await featureCollectionInit();
            await drawMap();
            addCommonEventListeners();
        }
        function addCommonEventListeners() {
            let mapCanvas = document.getElementById('mapCanvas');
            mapCanvas.addEventListener('wheel', scrollHandler);
            mapCanvas.addEventListener('mousedown', startDrag);
            mapCanvas.addEventListener('mousemove', onDrag);
            mapCanvas.addEventListener('mouseup', endDrag);
            mapCanvas.addEventListener('mouseleave', endDrag);
            mapCanvas.addEventListener('click', onClick);
            mapCanvas.addEventListener('mousemove', drawRectangleWithCursor);
        }
    </script>
</html>